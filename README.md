# Learn UE4

腾讯 2020 游戏客户端公开课作业。

每次作业在相应的分支中，共 7 次，主分支下的是最后一次作业。

作业均使用源码版的 UE 4.25 完成。

## 作业说明

HW1：UE4 入门

* 编译出源码版本的 UE4
* 简单修改第三人称射击游戏模板并打包出安卓 apk（ETC2）

HW2：游戏模式

* 修改实现自己的 GameMode、PlayerState、PlayerController、Character、HUD 等，完成一个简易打靶游戏
* 靶会左右移动，根据射中位置距靶心的距离加分
* 左上方显示当前玩家信息和所有玩家的分数（按分数降序）
* 允许通过 `.\xxx.exe ?listen` 和 `.\xxx.exe 127.0.0.1 -game` 的方式联机，靶的运动、玩家分数等能正常同步
* 枪支资源来源：虚幻商城 - FPS Weapon Bundle

HW3：UMG

* 多地图：主游戏地图与主菜单地图
* 增加 UI
  * 可输入用户名的输入框（会在游戏中显示）
  * 排行榜
  * 以上二者的 UI 动画（淡入的效果）
  * 游戏中通过按钮进行射击与跳跃（方便移动端）
* SaveGame
  * 保存载入排行榜，正常退出游戏会保存在本地，最多保存前 10
* 增加游戏计时
  * 右上角以“mm:ss”的形式显示剩余时间
  * 计时结束后游戏结束，可以选择回到主界面还是重新游戏

HW4：骨骼动画

* 动画
  * 基本运动蓝图 - 停、跑、跳的自动机
  * 跑步的多向运动的混合空间
  * 蒙太奇：开枪动作、持枪格挡动作（静止全身、移动上半身）
  * 瞄准偏移
  * 资源来源：mixamo
* 优化 UI
  * 通过按钮进行射击、格挡、跳跃
  * 按钮及虚拟手柄添加自定义的图案（拿 PS 随便糊的）

HW5：基本物理

* 捡枪
  * 每 2.5s 随机生成一把武器（4 种射线武器（枪）和 1 种抛射武器（手雷））在场景的玩家所在的半侧，最多有 6 个
  * 玩家经过地上的武器时会用之替换手里的武器，一开始手里没有武器
  * 手里的武器会影响 Fire 的行为，以及是否能进行持枪格挡动作
* 射线武器
  * 击中人的不同位置（头、身、手、脚、臂、腿）会播放不同的音效
  * 音效来源：虚幻商城 - HumanVocalizations
* 抛射武器
  * 击中人时直接爆炸
  * 击中场景时根据摩擦力减速，减速到一定阈值时爆炸
    * 地上放了三块不同物理材质的地板，有不同的摩擦力可以测试
  * 爆炸会影响部分场景种的物体
  * 生成超过 10s 未爆炸则直接销毁

HW6：网络同步

* 通过 Session 联机
* 玩家可以自由对战
  * 枪类武器根据击中部分造成不同的伤害、手雷击中则能够直接击杀
  * 格挡过程中不会受伤（总之就是能挡得住
* 游戏结束后显示结果，包含玩家名、击杀数、死亡数
* 死亡、开火等有动画且会同步
* 对之前的修改：
  * 原先的打靶相关的部分被移除
  * 地上生成的枪的个数最多为 15
  * 原先显示分数与剩余时间的 HUD 改为一个 UMG 蓝图

HW7：AI

* 使用行为树与黑板实现可以寻敌、移动、开火、躲避的 AI 单位
* 实现了 2 种行为不同的 AI：
  * AI 1：移速适中、站在远处固定处射击、会在武器子弹不足且血量较低时逃走、开始躲避时进行格挡
  * AI 2：移速较快、会冲到玩家身边进行射击
  * 共同的行为：没有武器或武器没有子弹时寻找地上最近的武器并捡起
  * 游戏开始及 AI 单位死亡一段时间后随机生成两种中的一个

